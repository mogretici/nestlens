import{r as ft,a as pt,g as bt,b,u as jt,L as P,O as wt,c as Ae,d as kt,R as vt,e as B,N as Nt,f as Mt,B as St}from"./vendor-DFPqVsLw.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=a(n);fetch(n.href,c)}})();var qe={exports:{}},se={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We;function Ct(){if(We)return se;We=1;var t=ft(),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function i(d,g,f){var y,j={},p=null,x=null;f!==void 0&&(p=""+f),g.key!==void 0&&(p=""+g.key),g.ref!==void 0&&(x=g.ref);for(y in g)s.call(g,y)&&!c.hasOwnProperty(y)&&(j[y]=g[y]);if(d&&d.defaultProps)for(y in g=d.defaultProps,g)j[y]===void 0&&(j[y]=g[y]);return{$$typeof:r,type:d,key:p,ref:x,props:j,_owner:n.current}}return se.Fragment=a,se.jsx=i,se.jsxs=i,se}var Fe;function Dt(){return Fe||(Fe=1,qe.exports=Ct()),qe.exports}var e=Dt(),ge={},Ye;function Et(){if(Ye)return ge;Ye=1;var t=pt();return ge.createRoot=t.createRoot,ge.hydrateRoot=t.hydrateRoot,ge}var Pt=Et();const Ot=bt(Pt);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rt=(...t)=>t.filter((r,a,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===a).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=b.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:n="",children:c,iconNode:i,...d},g)=>b.createElement("svg",{ref:g,...Tt,width:r,height:r,stroke:t,strokeWidth:s?Number(a)*24/Number(r):a,className:rt("lucide",n),...d},[...i.map(([f,y])=>b.createElement(f,y)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=(t,r)=>{const a=b.forwardRef(({className:s,...n},c)=>b.createElement(Rt,{ref:c,iconNode:r,className:rt(`lucide-${qt(t)}`,s),...n}));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=S("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=S("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=S("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=S("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=S("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=S("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=S("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=S("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=S("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=S("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=S("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=S("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=S("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=S("Layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=S("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=S("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=S("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=S("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=S("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=S("Telescope",[["path",{d:"m10.065 12.493-6.18 1.318a.934.934 0 0 1-1.108-.702l-.537-2.15a1.07 1.07 0 0 1 .691-1.265l13.504-4.44",key:"k4qptu"}],["path",{d:"m13.56 11.747 4.332-.924",key:"19l80z"}],["path",{d:"m16 21-3.105-6.21",key:"7oh9d"}],["path",{d:"M16.485 5.94a2 2 0 0 1 1.455-2.425l1.09-.272a1 1 0 0 1 1.212.727l1.515 6.06a1 1 0 0 1-.727 1.213l-1.09.272a2 2 0 0 1-2.425-1.455z",key:"m7xp4m"}],["path",{d:"m6.158 8.633 1.114 4.456",key:"74o979"}],["path",{d:"m8 21 3.105-6.21",key:"1fvxut"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=S("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=S("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=S("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=S("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),It=()=>`${window.location.origin}/__nestlens__/api`,dt=It();async function H(t,r){const a=await fetch(`${dt}${t}`,r);if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}async function Qt(t){return H(`/entries/${t}`)}async function Xt(){return H("/stats")}async function zt(){return(await fetch(`${dt}/entries`,{method:"DELETE"})).json()}async function ye(t){const r=new URLSearchParams;return t.type&&r.set("type",t.type),t.limit&&r.set("limit",t.limit.toString()),t.beforeSequence!==void 0&&r.set("beforeSequence",t.beforeSequence.toString()),t.afterSequence!==void 0&&r.set("afterSequence",t.afterSequence.toString()),H(`/entries/cursor?${r.toString()}`)}async function Gt(t){const r=new URLSearchParams;return t&&r.set("type",t),H(`/entries/latest-sequence?${r.toString()}`)}async function Vt(t,r){const a=new URLSearchParams;return a.set("afterSequence",t.toString()),r&&a.set("type",r),H(`/entries/check-new?${a.toString()}`)}async function Ut(){return H("/pruning/status")}async function Jt(){return H("/pruning/run",{method:"POST"})}async function Zt(t){return H(`/entries/${t}/resolve`,{method:"PATCH"})}async function Kt(t){return H(`/entries/${t}/unresolve`,{method:"PATCH"})}const Xe=[{name:"Dashboard",href:"/",icon:Re},{name:"Requests",href:"/requests",icon:Re},{name:"Queries",href:"/queries",icon:nt},{name:"Exceptions",href:"/exceptions",icon:le},{name:"Logs",href:"/logs",icon:it}];function er(){const t=jt(),[r,a]=b.useState(!1),[s,n]=b.useState(()=>typeof window<"u"?document.documentElement.classList.contains("dark"):!1),c=()=>{n(!s),document.documentElement.classList.toggle("dark")},i=async()=>{window.confirm("Are you sure you want to clear all entries?")&&(await zt(),window.location.reload())};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:`fixed inset-0 z-50 lg:hidden ${r?"":"hidden"}`,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-900/80",onClick:()=>a(!1)}),e.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-white dark:bg-gray-800",children:[e.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[e.jsxs(P,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"NestLens"})]}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400",children:e.jsx(Bt,{className:"h-6 w-6"})})]}),e.jsx("nav",{className:"mt-4 px-2",children:Xe.map(d=>{const g=t.pathname===d.href;return e.jsxs(P,{to:d.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg mb-1 ${g?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,onClick:()=>a(!1),children:[e.jsx(d.icon,{className:"h-5 w-5"}),e.jsx("span",{children:d.name})]},d.name)})})]})]}),e.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:e.jsxs("div",{className:"flex flex-col flex-grow bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex h-16 items-center px-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs(P,{to:"/",className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"NestLens"})]})}),e.jsx("nav",{className:"flex-1 mt-4 px-2",children:Xe.map(d=>{const g=t.pathname===d.href;return e.jsxs(P,{to:d.href,className:`flex items-center space-x-3 px-3 py-2 rounded-lg mb-1 ${g?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"}`,children:[e.jsx(d.icon,{className:"h-5 w-5"}),e.jsx("span",{children:d.name})]},d.name)})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("button",{onClick:c,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white text-sm w-full",children:[s?e.jsx(Ie,{className:"h-4 w-4"}):e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:s?"Light Mode":"Dark Mode"})]}),e.jsxs("button",{onClick:i,className:"flex items-center space-x-2 text-red-600 hover:text-red-700 dark:text-red-400 text-sm w-full",children:[e.jsx(lt,{className:"h-4 w-4"}),e.jsx("span",{children:"Clear All Data"})]})]})]})}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsxs("header",{className:"sticky top-0 z-40 flex h-16 items-center gap-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 px-4 lg:hidden",children:[e.jsx("button",{onClick:()=>a(!0),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400",children:e.jsx(_t,{className:"h-6 w-6"})}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{onClick:c,className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s?e.jsx(Ie,{className:"h-5 w-5"}):e.jsx(Be,{className:"h-5 w-5"})})]}),e.jsx("main",{className:"p-4 lg:p-6",children:e.jsx(wt,{})})]})]})}const ot=6048e5,tr=864e5,fe=43200,ze=1440,Ge=Symbol.for("constructDateFrom");function _(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Ge in t?t[Ge](r):t instanceof Date?new t.constructor(r):new Date(r)}function E(t,r){return _(r||t,t)}let rr={};function de(){return rr}function ce(t,r){var d,g,f,y;const a=de(),s=(r==null?void 0:r.weekStartsOn)??((g=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:g.weekStartsOn)??a.weekStartsOn??((y=(f=a.locale)==null?void 0:f.options)==null?void 0:y.weekStartsOn)??0,n=E(t,r==null?void 0:r.in),c=n.getDay(),i=(c<s?7:0)+c-s;return n.setDate(n.getDate()-i),n.setHours(0,0,0,0),n}function je(t,r){return ce(t,{...r,weekStartsOn:1})}function ut(t,r){const a=E(t,r==null?void 0:r.in),s=a.getFullYear(),n=_(a,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const c=je(n),i=_(a,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const d=je(i);return a.getTime()>=c.getTime()?s+1:a.getTime()>=d.getTime()?s:s-1}function we(t){const r=E(t),a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return a.setUTCFullYear(r.getFullYear()),+t-+a}function ke(t,...r){const a=_.bind(null,t||r.find(s=>typeof s=="object"));return r.map(a)}function Ve(t,r){const a=E(t,r==null?void 0:r.in);return a.setHours(0,0,0,0),a}function ar(t,r,a){const[s,n]=ke(a==null?void 0:a.in,t,r),c=Ve(s),i=Ve(n),d=+c-we(c),g=+i-we(i);return Math.round((d-g)/tr)}function sr(t,r){const a=ut(t,r),s=_(t,0);return s.setFullYear(a,0,4),s.setHours(0,0,0,0),je(s)}function be(t,r){const a=+E(t)-+E(r);return a<0?-1:a>0?1:a}function nr(t){return _(t,Date.now())}function ir(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lr(t){return!(!ir(t)&&typeof t!="number"||isNaN(+E(t)))}function cr(t,r,a){const[s,n]=ke(a==null?void 0:a.in,t,r),c=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return c*12+i}function dr(t){return r=>{const s=(t?Math[t]:Math.trunc)(r);return s===0?0:s}}function or(t,r){return+E(t)-+E(r)}function ur(t,r){const a=E(t,r==null?void 0:r.in);return a.setHours(23,59,59,999),a}function xr(t,r){const a=E(t,r==null?void 0:r.in),s=a.getMonth();return a.setFullYear(a.getFullYear(),s+1,0),a.setHours(23,59,59,999),a}function hr(t,r){const a=E(t,r==null?void 0:r.in);return+ur(a,r)==+xr(a,r)}function mr(t,r,a){const[s,n,c]=ke(a==null?void 0:a.in,t,t,r),i=be(n,c),d=Math.abs(cr(n,c));if(d<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*d);let g=be(n,c)===-i;hr(s)&&d===1&&be(s,c)===1&&(g=!1);const f=i*(d-+g);return f===0?0:f}function gr(t,r,a){const s=or(t,r)/1e3;return dr(a==null?void 0:a.roundingMethod)(s)}function yr(t,r){const a=E(t,r==null?void 0:r.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}const fr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pr=(t,r,a)=>{let s;const n=fr[t];return typeof n=="string"?s=n:r===1?s=n.one:s=n.other.replace("{{count}}",r.toString()),a!=null&&a.addSuffix?a.comparison&&a.comparison>0?"in "+s:s+" ago":s};function Te(t){return(r={})=>{const a=r.width?String(r.width):t.defaultWidth;return t.formats[a]||t.formats[t.defaultWidth]}}const br={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},jr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kr={date:Te({formats:br,defaultWidth:"full"}),time:Te({formats:jr,defaultWidth:"full"}),dateTime:Te({formats:wr,defaultWidth:"full"})},vr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Nr=(t,r,a,s)=>vr[t];function ne(t){return(r,a)=>{const s=a!=null&&a.context?String(a.context):"standalone";let n;if(s==="formatting"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,d=a!=null&&a.width?String(a.width):i;n=t.formattingValues[d]||t.formattingValues[i]}else{const i=t.defaultWidth,d=a!=null&&a.width?String(a.width):t.defaultWidth;n=t.values[d]||t.values[i]}const c=t.argumentCallback?t.argumentCallback(r):r;return n[c]}}const Mr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Sr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Cr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Dr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Er={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Pr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Or=(t,r)=>{const a=Number(t),s=a%100;if(s>20||s<10)switch(s%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},qr={ordinalNumber:Or,era:ne({values:Mr,defaultWidth:"wide"}),quarter:ne({values:Sr,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ne({values:Cr,defaultWidth:"wide"}),day:ne({values:Dr,defaultWidth:"wide"}),dayPeriod:ne({values:Er,defaultWidth:"wide",formattingValues:Pr,defaultFormattingWidth:"wide"})};function ie(t){return(r,a={})=>{const s=a.width,n=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],c=r.match(n);if(!c)return null;const i=c[0],d=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],g=Array.isArray(d)?Rr(d,j=>j.test(i)):Tr(d,j=>j.test(i));let f;f=t.valueCallback?t.valueCallback(g):g,f=a.valueCallback?a.valueCallback(f):f;const y=r.slice(i.length);return{value:f,rest:y}}}function Tr(t,r){for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&r(t[a]))return a}function Rr(t,r){for(let a=0;a<t.length;a++)if(r(t[a]))return a}function Ar(t){return(r,a={})=>{const s=r.match(t.matchPattern);if(!s)return null;const n=s[0],c=r.match(t.parsePattern);if(!c)return null;let i=t.valueCallback?t.valueCallback(c[0]):c[0];i=a.valueCallback?a.valueCallback(i):i;const d=r.slice(n.length);return{value:i,rest:d}}}const Lr=/^(\d+)(th|st|nd|rd)?/i,$r=/\d+/i,Wr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Fr={any:[/^b/i,/^(a|c)/i]},Yr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_r={any:[/1/i,/2/i,/3/i,/4/i]},Hr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Br={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ir={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Qr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gr={ordinalNumber:Ar({matchPattern:Lr,parsePattern:$r,valueCallback:t=>parseInt(t,10)}),era:ie({matchPatterns:Wr,defaultMatchWidth:"wide",parsePatterns:Fr,defaultParseWidth:"any"}),quarter:ie({matchPatterns:Yr,defaultMatchWidth:"wide",parsePatterns:_r,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ie({matchPatterns:Hr,defaultMatchWidth:"wide",parsePatterns:Br,defaultParseWidth:"any"}),day:ie({matchPatterns:Ir,defaultMatchWidth:"wide",parsePatterns:Qr,defaultParseWidth:"any"}),dayPeriod:ie({matchPatterns:Xr,defaultMatchWidth:"any",parsePatterns:zr,defaultParseWidth:"any"})},xt={code:"en-US",formatDistance:pr,formatLong:kr,formatRelative:Nr,localize:qr,match:Gr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Vr(t,r){const a=E(t,r==null?void 0:r.in);return ar(a,yr(a))+1}function Ur(t,r){const a=E(t,r==null?void 0:r.in),s=+je(a)-+sr(a);return Math.round(s/ot)+1}function ht(t,r){var y,j,p,x;const a=E(t,r==null?void 0:r.in),s=a.getFullYear(),n=de(),c=(r==null?void 0:r.firstWeekContainsDate)??((j=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:j.firstWeekContainsDate)??n.firstWeekContainsDate??((x=(p=n.locale)==null?void 0:p.options)==null?void 0:x.firstWeekContainsDate)??1,i=_((r==null?void 0:r.in)||t,0);i.setFullYear(s+1,0,c),i.setHours(0,0,0,0);const d=ce(i,r),g=_((r==null?void 0:r.in)||t,0);g.setFullYear(s,0,c),g.setHours(0,0,0,0);const f=ce(g,r);return+a>=+d?s+1:+a>=+f?s:s-1}function Jr(t,r){var d,g,f,y;const a=de(),s=(r==null?void 0:r.firstWeekContainsDate)??((g=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:g.firstWeekContainsDate)??a.firstWeekContainsDate??((y=(f=a.locale)==null?void 0:f.options)==null?void 0:y.firstWeekContainsDate)??1,n=ht(t,r),c=_((r==null?void 0:r.in)||t,0);return c.setFullYear(n,0,s),c.setHours(0,0,0,0),ce(c,r)}function Zr(t,r){const a=E(t,r==null?void 0:r.in),s=+ce(a,r)-+Jr(a,r);return Math.round(s/ot)+1}function N(t,r){const a=t<0?"-":"",s=Math.abs(t).toString().padStart(r,"0");return a+s}const I={y(t,r){const a=t.getFullYear(),s=a>0?a:1-a;return N(r==="yy"?s%100:s,r.length)},M(t,r){const a=t.getMonth();return r==="M"?String(a+1):N(a+1,2)},d(t,r){return N(t.getDate(),r.length)},a(t,r){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(t,r){return N(t.getHours()%12||12,r.length)},H(t,r){return N(t.getHours(),r.length)},m(t,r){return N(t.getMinutes(),r.length)},s(t,r){return N(t.getSeconds(),r.length)},S(t,r){const a=r.length,s=t.getMilliseconds(),n=Math.trunc(s*Math.pow(10,a-3));return N(n,r.length)}},te={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ue={G:function(t,r,a){const s=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return a.era(s,{width:"abbreviated"});case"GGGGG":return a.era(s,{width:"narrow"});case"GGGG":default:return a.era(s,{width:"wide"})}},y:function(t,r,a){if(r==="yo"){const s=t.getFullYear(),n=s>0?s:1-s;return a.ordinalNumber(n,{unit:"year"})}return I.y(t,r)},Y:function(t,r,a,s){const n=ht(t,s),c=n>0?n:1-n;if(r==="YY"){const i=c%100;return N(i,2)}return r==="Yo"?a.ordinalNumber(c,{unit:"year"}):N(c,r.length)},R:function(t,r){const a=ut(t);return N(a,r.length)},u:function(t,r){const a=t.getFullYear();return N(a,r.length)},Q:function(t,r,a){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return N(s,2);case"Qo":return a.ordinalNumber(s,{unit:"quarter"});case"QQQ":return a.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,a){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return N(s,2);case"qo":return a.ordinalNumber(s,{unit:"quarter"});case"qqq":return a.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,a){const s=t.getMonth();switch(r){case"M":case"MM":return I.M(t,r);case"Mo":return a.ordinalNumber(s+1,{unit:"month"});case"MMM":return a.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,a){const s=t.getMonth();switch(r){case"L":return String(s+1);case"LL":return N(s+1,2);case"Lo":return a.ordinalNumber(s+1,{unit:"month"});case"LLL":return a.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,a,s){const n=Zr(t,s);return r==="wo"?a.ordinalNumber(n,{unit:"week"}):N(n,r.length)},I:function(t,r,a){const s=Ur(t);return r==="Io"?a.ordinalNumber(s,{unit:"week"}):N(s,r.length)},d:function(t,r,a){return r==="do"?a.ordinalNumber(t.getDate(),{unit:"date"}):I.d(t,r)},D:function(t,r,a){const s=Vr(t);return r==="Do"?a.ordinalNumber(s,{unit:"dayOfYear"}):N(s,r.length)},E:function(t,r,a){const s=t.getDay();switch(r){case"E":case"EE":case"EEE":return a.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(s,{width:"short",context:"formatting"});case"EEEE":default:return a.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,a,s){const n=t.getDay(),c=(n-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(c);case"ee":return N(c,2);case"eo":return a.ordinalNumber(c,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(t,r,a,s){const n=t.getDay(),c=(n-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(c);case"cc":return N(c,r.length);case"co":return a.ordinalNumber(c,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(t,r,a){const s=t.getDay(),n=s===0?7:s;switch(r){case"i":return String(n);case"ii":return N(n,r.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(s,{width:"short",context:"formatting"});case"iiii":default:return a.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,a){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,r,a){const s=t.getHours();let n;switch(s===12?n=te.noon:s===0?n=te.midnight:n=s/12>=1?"pm":"am",r){case"b":case"bb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,r,a){const s=t.getHours();let n;switch(s>=17?n=te.evening:s>=12?n=te.afternoon:s>=4?n=te.morning:n=te.night,r){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,r,a){if(r==="ho"){let s=t.getHours()%12;return s===0&&(s=12),a.ordinalNumber(s,{unit:"hour"})}return I.h(t,r)},H:function(t,r,a){return r==="Ho"?a.ordinalNumber(t.getHours(),{unit:"hour"}):I.H(t,r)},K:function(t,r,a){const s=t.getHours()%12;return r==="Ko"?a.ordinalNumber(s,{unit:"hour"}):N(s,r.length)},k:function(t,r,a){let s=t.getHours();return s===0&&(s=24),r==="ko"?a.ordinalNumber(s,{unit:"hour"}):N(s,r.length)},m:function(t,r,a){return r==="mo"?a.ordinalNumber(t.getMinutes(),{unit:"minute"}):I.m(t,r)},s:function(t,r,a){return r==="so"?a.ordinalNumber(t.getSeconds(),{unit:"second"}):I.s(t,r)},S:function(t,r){return I.S(t,r)},X:function(t,r,a){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return Ze(s);case"XXXX":case"XX":return G(s);case"XXXXX":case"XXX":default:return G(s,":")}},x:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"x":return Ze(s);case"xxxx":case"xx":return G(s);case"xxxxx":case"xxx":default:return G(s,":")}},O:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Je(s,":");case"OOOO":default:return"GMT"+G(s,":")}},z:function(t,r,a){const s=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Je(s,":");case"zzzz":default:return"GMT"+G(s,":")}},t:function(t,r,a){const s=Math.trunc(+t/1e3);return N(s,r.length)},T:function(t,r,a){return N(+t,r.length)}};function Je(t,r=""){const a=t>0?"-":"+",s=Math.abs(t),n=Math.trunc(s/60),c=s%60;return c===0?a+String(n):a+String(n)+r+N(c,2)}function Ze(t,r){return t%60===0?(t>0?"-":"+")+N(Math.abs(t)/60,2):G(t,r)}function G(t,r=""){const a=t>0?"-":"+",s=Math.abs(t),n=N(Math.trunc(s/60),2),c=N(s%60,2);return a+n+r+c}const Ke=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},mt=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Kr=(t,r)=>{const a=t.match(/(P+)(p+)?/)||[],s=a[1],n=a[2];if(!n)return Ke(t,r);let c;switch(s){case"P":c=r.dateTime({width:"short"});break;case"PP":c=r.dateTime({width:"medium"});break;case"PPP":c=r.dateTime({width:"long"});break;case"PPPP":default:c=r.dateTime({width:"full"});break}return c.replace("{{date}}",Ke(s,r)).replace("{{time}}",mt(n,r))},ea={p:mt,P:Kr},ta=/^D+$/,ra=/^Y+$/,aa=["D","DD","YY","YYYY"];function sa(t){return ta.test(t)}function na(t){return ra.test(t)}function ia(t,r,a){const s=la(t,r,a);if(console.warn(s),aa.includes(t))throw new RangeError(s)}function la(t,r,a){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${s} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ca=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,da=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,oa=/^'([^]*?)'?$/,ua=/''/g,xa=/[a-zA-Z]/;function ae(t,r,a){var y,j,p,x;const s=de(),n=s.locale??xt,c=s.firstWeekContainsDate??((j=(y=s.locale)==null?void 0:y.options)==null?void 0:j.firstWeekContainsDate)??1,i=s.weekStartsOn??((x=(p=s.locale)==null?void 0:p.options)==null?void 0:x.weekStartsOn)??0,d=E(t,a==null?void 0:a.in);if(!lr(d))throw new RangeError("Invalid time value");let g=r.match(da).map(l=>{const u=l[0];if(u==="p"||u==="P"){const m=ea[u];return m(l,n.formatLong)}return l}).join("").match(ca).map(l=>{if(l==="''")return{isToken:!1,value:"'"};const u=l[0];if(u==="'")return{isToken:!1,value:ha(l)};if(Ue[u])return{isToken:!0,value:l};if(u.match(xa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+u+"`");return{isToken:!1,value:l}});n.localize.preprocessor&&(g=n.localize.preprocessor(d,g));const f={firstWeekContainsDate:c,weekStartsOn:i,locale:n};return g.map(l=>{if(!l.isToken)return l.value;const u=l.value;(na(u)||sa(u))&&ia(u,r,String(t));const m=Ue[u[0]];return m(d,u,n.localize,f)}).join("")}function ha(t){const r=t.match(oa);return r?r[1].replace(ua,"'"):t}function ma(t,r,a){const s=de(),n=(a==null?void 0:a.locale)??s.locale??xt,c=2520,i=be(t,r);if(isNaN(i))throw new RangeError("Invalid time value");const d=Object.assign({},a,{addSuffix:a==null?void 0:a.addSuffix,comparison:i}),[g,f]=ke(a==null?void 0:a.in,...i>0?[r,t]:[t,r]),y=gr(f,g),j=(we(f)-we(g))/1e3,p=Math.round((y-j)/60);let x;if(p<2)return a!=null&&a.includeSeconds?y<5?n.formatDistance("lessThanXSeconds",5,d):y<10?n.formatDistance("lessThanXSeconds",10,d):y<20?n.formatDistance("lessThanXSeconds",20,d):y<40?n.formatDistance("halfAMinute",0,d):y<60?n.formatDistance("lessThanXMinutes",1,d):n.formatDistance("xMinutes",1,d):p===0?n.formatDistance("lessThanXMinutes",1,d):n.formatDistance("xMinutes",p,d);if(p<45)return n.formatDistance("xMinutes",p,d);if(p<90)return n.formatDistance("aboutXHours",1,d);if(p<ze){const l=Math.round(p/60);return n.formatDistance("aboutXHours",l,d)}else{if(p<c)return n.formatDistance("xDays",1,d);if(p<fe){const l=Math.round(p/ze);return n.formatDistance("xDays",l,d)}else if(p<fe*2)return x=Math.round(p/fe),n.formatDistance("aboutXMonths",x,d)}if(x=mr(f,g),x<12){const l=Math.round(p/fe);return n.formatDistance("xMonths",l,d)}else{const l=x%12,u=Math.trunc(x/12);return l<3?n.formatDistance("aboutXYears",u,d):l<9?n.formatDistance("overXYears",u,d):n.formatDistance("almostXYears",u+1,d)}}function R(t,r){return ma(t,nr(t),r)}function D(t){if(t.includes("T")&&(t.includes("Z")||t.includes("+")))return new Date(t);const r=t.replace(" ","T")+"Z";return new Date(r)}function ga(t){if(t===0)return"0 Bytes";const r=1024,a=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(r));return parseFloat((t/Math.pow(r,s)).toFixed(2))+" "+a[s]}function ya(){const[t,r]=b.useState(null),[a,s]=b.useState(!0),[n,c]=b.useState(!1),i=async()=>{try{const g=await Ut();r(g.data)}catch(g){console.error("Failed to fetch pruning status:",g)}finally{s(!1)}},d=async()=>{c(!0);try{(await Jt()).success&&await i()}catch(g){console.error("Failed to run pruning:",g)}finally{c(!1)}};return b.useEffect(()=>{i();const g=setInterval(i,3e4);return()=>clearInterval(g)},[]),a?e.jsx("div",{className:"card p-6",children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})})}):t?e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Storage & Pruning"}),e.jsxs("button",{onClick:d,disabled:n||!t.enabled,className:"btn btn-secondary btn-sm flex items-center space-x-1",children:[n?e.jsx(Q,{className:"h-3 w-3 animate-spin"}):e.jsx(Ht,{className:"h-3 w-3"}),e.jsx("span",{children:"Prune Now"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ft,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Database Size"})]}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:t.databaseSize?ga(t.databaseSize):"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(lt,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Entries"})]}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:t.totalEntries.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(st,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Retention"})]}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[t.maxAge," hours"]})]}),t.lastRun&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last pruned"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(t.lastRun),{addSuffix:!0})})]}),t.nextRun&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Next prune"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(t.nextRun),{addSuffix:!0})})]}),t.oldestEntry&&t.newestEntry&&e.jsx("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Data range: ",ae(D(t.oldestEntry),"MMM d, HH:mm")," -"," ",ae(D(t.newestEntry),"MMM d, HH:mm")]})}),e.jsx("div",{className:"pt-2",children:e.jsx("span",{className:`badge ${t.enabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:t.enabled?"Auto-pruning enabled":"Auto-pruning disabled"})})]})]}):null}function fa(){const[t,r]=b.useState(null),[a,s]=b.useState(!0);if(b.useEffect(()=>{const c=async()=>{try{const d=await Xt();r(d.data)}catch(d){console.error("Failed to fetch stats:",d)}finally{s(!1)}};c();const i=setInterval(c,5e3);return()=>clearInterval(i)},[]),a)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});const n=[{name:"Requests",value:(t==null?void 0:t.byType.request)||0,icon:Re,href:"/requests",color:"bg-blue-500"},{name:"Queries",value:(t==null?void 0:t.byType.query)||0,icon:nt,href:"/queries",color:"bg-purple-500"},{name:"Exceptions",value:(t==null?void 0:t.byType.exception)||0,icon:le,href:"/exceptions",color:"bg-red-500"},{name:"Logs",value:(t==null?void 0:t.byType.log)||0,icon:it,href:"/logs",color:"bg-green-500"}];return e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex items-center px-4 lg:px-6 h-full",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Dashboard"})})}),e.jsxs("div",{className:"pt-16 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(c=>e.jsx(P,{to:c.href,className:"card p-6 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:c.name}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-1",children:c.value.toLocaleString()})]}),e.jsx("div",{className:`${c.color} p-3 rounded-lg`,children:e.jsx(c.icon,{className:"h-6 w-6 text-white"})})]})},c.name))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Performance"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(st,{className:"h-5 w-5 text-gray-400"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Avg Response Time"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t!=null&&t.avgResponseTime?`${Math.round(t.avgResponseTime)}ms`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ct,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Slow Queries"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(t==null?void 0:t.slowQueries)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(le,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Exceptions"})]}),e.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(t==null?void 0:t.exceptions)||0})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Total Entries"}),e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-5xl font-bold text-primary-600",children:(t==null?void 0:t.total.toLocaleString())||0}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"entries recorded"})]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsx(ya,{})})]})]})}const gt="nestlens-auto-refresh";function pa(){try{const t=localStorage.getItem(gt);return t===null?!0:t==="true"}catch{return!0}}function ba(t){try{localStorage.setItem(gt,String(t))}catch{}}function ve(t={}){const{type:r,limit:a=50,autoRefresh:s,autoRefreshInterval:n=5e3}=t,[c,i]=b.useState([]),[d,g]=b.useState(!0),[f,y]=b.useState(!1),[j,p]=b.useState(null),[x,l]=b.useState(0),[u,m]=b.useState(s??pa()),o=b.useRef(null),C=b.useRef(null),T=b.useCallback(async()=>{g(!0);try{const k=await ye({type:r,limit:a});i(k.data),p(k.meta),o.current=k.meta.newestSequence,l(0)}catch(k){console.error("Failed to fetch entries:",k)}finally{g(!1)}},[r,a]),V=b.useCallback(async()=>{if(!(!(j!=null&&j.oldestSequence)||!j.hasMore)){y(!0);try{const k=await ye({type:r,limit:a,beforeSequence:j.oldestSequence});i(W=>[...W,...k.data]),p(k.meta)}catch(k){console.error("Failed to load more entries:",k)}finally{y(!1)}}},[r,a,j]),U=b.useCallback(async()=>{if(o.current){y(!0);try{const k=await ye({type:r,limit:x||a,afterSequence:o.current});k.data.length>0&&(i(W=>[...k.data,...W]),o.current=k.meta.newestSequence,l(0))}catch(k){console.error("Failed to load new entries:",k)}finally{y(!1)}}},[r,a,x]),J=b.useCallback(async()=>{y(!0);try{const k=await ye({type:r,limit:a});i(k.data),p(k.meta),o.current=k.meta.newestSequence,l(0)}catch(k){console.error("Failed to refresh entries:",k)}finally{y(!1)}},[r,a]),X=b.useCallback(async()=>{if(!o.current){try{(await Gt(r)).data&&l(1)}catch{}return}try{const k=await Vt(o.current,r);l(k.data.count)}catch{}},[r]),Z=b.useCallback(k=>{m(k),ba(k)},[]),K=b.useCallback(k=>{i(W=>W.map(z=>z.id===k.id?k:z))},[]);return b.useEffect(()=>{T()},[T]),b.useEffect(()=>(u&&(C.current=setInterval(X,n)),()=>{C.current&&(clearInterval(C.current),C.current=null)}),[u,n,X]),{entries:c,loading:d,refreshing:f,meta:j,newEntriesCount:x,hasMore:(j==null?void 0:j.hasMore)??!1,loadMore:V,loadNew:U,refresh:J,setAutoRefresh:Z,autoRefreshEnabled:u,updateEntry:K}}function Ne({count:t,onClick:r,loading:a}){return t===0?null:e.jsxs("button",{onClick:r,disabled:a,className:"w-full py-3 px-4 bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-medium rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/30 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",children:[a?e.jsx(Q,{className:"h-4 w-4 animate-spin"}):e.jsx(Lt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Load ",t," new ",t===1?"entry":"entries"]})]})}function Me({hasMore:t,onClick:r,loading:a}){return t?e.jsxs("button",{onClick:r,disabled:a,className:"w-full py-3 px-4 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2 disabled:opacity-50",children:[a?e.jsx(Q,{className:"h-4 w-4 animate-spin"}):e.jsx(at,{className:"h-4 w-4"}),e.jsx("span",{children:"Load older entries"})]}):null}function Se({enabled:t,onChange:r}){return e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t,onChange:a=>r(a.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{children:"Auto-refresh"})]})}function ja(t){return t==="error"||t.startsWith("Exception:")||t==="5xx"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":t==="warning"||t==="4xx"||t==="client-error"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":t==="success"||t==="cache-hit"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":t==="slow"?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400":t.startsWith("User:")?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":t.startsWith("Method:")?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":t.startsWith("Level:")?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}function Ce({tags:t,maxTags:r=3}){if(!t||t.length===0)return null;const a=t.slice(0,r),s=t.length-r;return e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.map(n=>e.jsx("span",{className:`inline-flex items-center rounded-full px-1.5 py-0.5 text-xs font-medium ${ja(n)}`,children:n},n)),s>0&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",s]})]})}function Le(t){return t.type==="request"}function De(t){return t.type==="query"}function Ee(t){return t.type==="exception"}function Pe(t){return t.type==="log"}function wa(t){return t.type==="cache"}function ka(t){return t.type==="event"}function va(t){return t.type==="job"}function Na(t){return t.type==="mail"}const Ma={GET:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",POST:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",PUT:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",PATCH:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",DELETE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},Sa=t=>t>=500?"text-red-600 dark:text-red-400":t>=400?"text-yellow-600 dark:text-yellow-400":t>=300?"text-blue-600 dark:text-blue-400":"text-green-600 dark:text-green-400";function Ca(){const t=Ae(),{entries:r,loading:a,refreshing:s,newEntriesCount:n,hasMore:c,loadMore:i,loadNew:d,refresh:g,autoRefreshEnabled:f,setAutoRefresh:y}=ve({type:"request",limit:50}),j=r.filter(p=>Le(p));return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-full",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Requests"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Se,{enabled:f,onChange:y}),e.jsxs("button",{onClick:()=>g(),disabled:s,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(Q,{className:`h-4 w-4 ${s?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})}),e.jsxs("div",{className:"pt-16 space-y-4",children:[e.jsx(Ne,{count:n,onClick:d,loading:s}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Path"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tags"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:j.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"No requests recorded yet"})}):j.map(p=>e.jsxs("tr",{onClick:()=>t(`/entries/${p.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`badge ${Ma[p.payload.method]||"badge-gray"}`,children:p.payload.method})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm font-mono text-gray-900 dark:text-white",children:p.payload.path})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-sm font-semibold ${Sa(p.payload.statusCode||0)}`,children:p.payload.statusCode})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[p.payload.duration,"ms"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ce,{tags:p.tags,maxTags:3})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(p.createdAt),{addSuffix:!0})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]},p.id))})]})})}),e.jsx(Me,{hasMore:c,onClick:i,loading:s})]})]})}function Da(){const t=Ae(),[r,a]=b.useState(!1),{entries:s,loading:n,refreshing:c,newEntriesCount:i,hasMore:d,loadMore:g,loadNew:f,refresh:y,autoRefreshEnabled:j,setAutoRefresh:p}=ve({type:"query",limit:50}),x=s.filter(l=>De(l)).filter(l=>!r||l.payload.slow);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-full",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Queries"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:l=>a(l.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{children:"Slow only"})]}),e.jsx(Se,{enabled:j,onChange:p}),e.jsxs("button",{onClick:()=>y(),disabled:c,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(Q,{className:`h-4 w-4 ${c?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})}),e.jsxs("div",{className:"pt-16 space-y-4",children:[e.jsx(Ne,{count:i,onClick:f,loading:c}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Query"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tags"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"No queries recorded yet"})}):x.map(l=>e.jsxs("tr",{onClick:()=>t(`/entries/${l.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("td",{className:"px-4 py-3 max-w-md",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[l.payload.slow&&e.jsx(ct,{className:"h-4 w-4 text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsx("code",{className:"text-sm text-gray-900 dark:text-white truncate block",children:l.payload.query.length>100?l.payload.query.substring(0,100)+"...":l.payload.query})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"badge badge-gray",children:l.payload.source||"unknown"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`text-sm font-semibold ${l.payload.slow?"text-yellow-600 dark:text-yellow-400":"text-gray-600 dark:text-gray-300"}`,children:[l.payload.duration,"ms"]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ce,{tags:l.tags,maxTags:3})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(l.createdAt),{addSuffix:!0})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]},l.id))})]})})}),e.jsx(Me,{hasMore:d,onClick:g,loading:c})]})]})}function Ea(){const[t,r]=b.useState("all"),[a,s]=b.useState(null),{entries:n,loading:c,refreshing:i,newEntriesCount:d,hasMore:g,loadMore:f,loadNew:y,refresh:j,autoRefreshEnabled:p,setAutoRefresh:x,updateEntry:l}=ve({type:"exception",limit:50}),u=n.filter(o=>Ee(o)).filter(o=>t==="all"?!0:t==="resolved"?!!o.resolvedAt:t==="unresolved"?!o.resolvedAt:!0),m=async(o,C)=>{o.preventDefault(),o.stopPropagation(),s(C.id);try{if(C.resolvedAt){const T=await Kt(C.id);l(T.data)}else{const T=await Zt(C.id);l(T.data)}}catch(T){console.error("Failed to toggle resolution:",T)}finally{s(null)}};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-full",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Exceptions"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center rounded-lg bg-gray-100 dark:bg-gray-800 p-1",children:[e.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1 text-sm rounded-md transition-colors ${t==="all"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"All"}),e.jsxs("button",{onClick:()=>r("unresolved"),className:`px-3 py-1 text-sm rounded-md transition-colors flex items-center space-x-1 ${t==="unresolved"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(He,{className:"h-3 w-3"}),e.jsx("span",{children:"Unresolved"})]}),e.jsxs("button",{onClick:()=>r("resolved"),className:`px-3 py-1 text-sm rounded-md transition-colors flex items-center space-x-1 ${t==="resolved"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(_e,{className:"h-3 w-3"}),e.jsx("span",{children:"Resolved"})]})]}),e.jsx(Se,{enabled:p,onChange:x}),e.jsxs("button",{onClick:()=>j(),disabled:i,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(Q,{className:`h-4 w-4 ${i?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})}),e.jsxs("div",{className:"pt-16 space-y-4",children:[e.jsx(Ne,{count:d,onClick:y,loading:i}),u.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"No exceptions"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Your application is running smoothly!"})]}):e.jsx("div",{className:"space-y-4",children:u.map(o=>e.jsx(P,{to:`/entries/${o.id}`,className:`card p-4 block hover:shadow-md transition-shadow ${o.resolvedAt?"opacity-60":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{className:`h-5 w-5 flex-shrink-0 ${o.resolvedAt?"text-gray-400":"text-red-500"}`}),e.jsx("h3",{className:`text-lg font-semibold truncate ${o.resolvedAt?"text-gray-500 dark:text-gray-400 line-through":"text-red-600 dark:text-red-400"}`,children:o.payload.name}),o.payload.code&&e.jsx("span",{className:"badge badge-error",children:o.payload.code}),o.resolvedAt&&e.jsx("span",{className:"badge bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:"Resolved"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1 truncate",children:o.payload.message}),o.payload.request&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:[o.payload.request.method," ",o.payload.request.url]}),o.tags&&o.tags.length>0&&e.jsx("div",{className:"mt-2",children:e.jsx(Ce,{tags:o.tags,maxTags:4})})]}),e.jsxs("div",{className:"flex items-center space-x-3 ml-4",children:[o.familyHash&&e.jsx("button",{onClick:C=>{C.preventDefault(),C.stopPropagation()},className:"p-1 text-gray-400 hover:text-primary-500 transition-colors",title:"View similar exceptions",children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:C=>m(C,o),disabled:a===o.id,className:`p-1 transition-colors ${o.resolvedAt?"text-green-500 hover:text-green-600":"text-gray-400 hover:text-green-500"}`,title:o.resolvedAt?"Mark as unresolved":"Mark as resolved",children:a===o.id?e.jsx(Q,{className:"h-5 w-5 animate-spin"}):o.resolvedAt?e.jsx(_e,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:R(D(o.createdAt),{addSuffix:!0})}),e.jsx(L,{className:"h-5 w-5 text-gray-400"})]})]})},o.id))}),e.jsx(Me,{hasMore:g,onClick:f,loading:i})]})]})}const Pa={debug:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",verbose:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",log:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",warn:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",error:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},Oa=["all","debug","verbose","log","warn","error"];function qa(){const t=Ae(),[r,a]=b.useState("all"),{entries:s,loading:n,refreshing:c,newEntriesCount:i,hasMore:d,loadMore:g,loadNew:f,refresh:y,autoRefreshEnabled:j,setAutoRefresh:p}=ve({type:"log",limit:50}),x=s.filter(l=>Pe(l)).filter(l=>r==="all"||l.payload.level===r);return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between px-4 lg:px-6 h-full",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Logs"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("select",{value:r,onChange:l=>a(l.target.value),className:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white px-3 py-1.5 text-sm",children:Oa.map(l=>e.jsx("option",{value:l,children:l==="all"?"All Levels":l.toUpperCase()},l))}),e.jsx(Se,{enabled:j,onChange:p}),e.jsxs("button",{onClick:()=>y(),disabled:c,className:"btn btn-secondary flex items-center space-x-2",children:[e.jsx(Q,{className:`h-4 w-4 ${c?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]})]})]})}),e.jsxs("div",{className:"pt-16 space-y-4",children:[e.jsx(Ne,{count:i,onClick:f,loading:c}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Level"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Message"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Context"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tags"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500 dark:text-gray-400",children:"No logs recorded yet"})}):x.map(l=>e.jsxs("tr",{onClick:()=>t(`/entries/${l.id}`),className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 cursor-pointer",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`badge ${Pa[l.payload.level]}`,children:l.payload.level.toUpperCase()})}),e.jsx("td",{className:"px-4 py-3 max-w-md",children:e.jsx("span",{className:"text-sm text-gray-900 dark:text-white truncate block",children:l.payload.message.length>100?l.payload.message.substring(0,100)+"...":l.payload.message})}),e.jsx("td",{className:"px-4 py-3",children:l.payload.context&&e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l.payload.context})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ce,{tags:l.tags,maxTags:3})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(l.createdAt),{addSuffix:!0})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]},l.id))})]})})}),e.jsx(Me,{hasMore:d,onClick:g,loading:c})]})]})}function M({label:t,value:r,className:a=""}){return e.jsxs("div",{className:`grid grid-cols-[180px_1fr] gap-4 py-3 border-b border-gray-100 dark:border-gray-700 last:border-0 ${a}`,children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),e.jsx("dd",{className:"text-sm text-gray-900 dark:text-white break-all",children:r})]})}const Ta={default:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",error:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",info:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",method:"bg-blue-500 text-white"};function O({children:t,variant:r="default",className:a=""}){return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded text-xs font-semibold ${Ta[r]} ${a}`,children:t})}function Ra(t){return t>=500?"error":t>=400?"warning":t>=300?"info":"success"}function yt(t){switch(t.toUpperCase()){case"GET":return"success";case"POST":return"info";case"PUT":case"PATCH":return"warning";case"DELETE":return"error";default:return"default"}}function et({tabs:t,defaultTab:r}){var c,i;const[a,s]=b.useState(r||((c=t[0])==null?void 0:c.id)),n=(i=t.find(d=>d.id===a))==null?void 0:i.content;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:t.map(d=>e.jsxs("button",{onClick:()=>s(d.id),className:`px-4 py-2.5 text-sm font-medium transition-colors relative ${a===d.id?"text-indigo-600 dark:text-indigo-400 bg-white dark:bg-gray-900":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[d.label,d.badge!==void 0&&d.badge>0&&e.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-medium bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded",children:d.badge})]}),a===d.id&&e.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-indigo-600 dark:bg-indigo-400"})]},d.id))}),e.jsx("div",{className:"p-4 bg-gray-900 dark:bg-gray-950",children:n})]})}function Aa(t){function r(h,w){return h<<w|h>>>32-w}function a(h,w){const v=(h&65535)+(w&65535);return(h>>16)+(w>>16)+(v>>16)<<16|v&65535}function s(h,w,v){return h&w|~h&v}function n(h,w,v){return h&v|w&~v}function c(h,w,v){return h^w^v}function i(h,w,v){return w^(h|~v)}function d(h,w,v,q,F,$,A){return h=a(h,a(a(s(w,v,q),F),A)),a(r(h,$),w)}function g(h,w,v,q,F,$,A){return h=a(h,a(a(n(w,v,q),F),A)),a(r(h,$),w)}function f(h,w,v,q,F,$,A){return h=a(h,a(a(c(w,v,q),F),A)),a(r(h,$),w)}function y(h,w,v,q,F,$,A){return h=a(h,a(a(i(w,v,q),F),A)),a(r(h,$),w)}function j(h){const w=[],v=h.length,q=v+8,$=((q-q%64)/64+1)*16;for(let ee=0;ee<$;ee++)w[ee]=0;let A=0,Y=0;for(;Y<v;){const ee=(Y-Y%4)/4;A=Y%4*8,w[ee]=w[ee]|h.charCodeAt(Y)<<A,Y++}const $e=(Y-Y%4)/4;return A=Y%4*8,w[$e]=w[$e]|128<<A,w[$-2]=v<<3,w[$-1]=v>>>29,w}function p(h){let w="";for(let v=0;v<=3;v++){const q=h>>>v*8&255;w+=("0"+q.toString(16)).slice(-2)}return w}const x=j(t);let l=1732584193,u=4023233417,m=2562383102,o=271733878;const C=7,T=12,V=17,U=22,J=5,X=9,Z=14,K=20,k=4,W=11,z=16,oe=23,ue=6,xe=10,he=15,me=21;for(let h=0;h<x.length;h+=16){const w=l,v=u,q=m,F=o;l=d(l,u,m,o,x[h+0],C,3614090360),o=d(o,l,u,m,x[h+1],T,3905402710),m=d(m,o,l,u,x[h+2],V,606105819),u=d(u,m,o,l,x[h+3],U,3250441966),l=d(l,u,m,o,x[h+4],C,4118548399),o=d(o,l,u,m,x[h+5],T,1200080426),m=d(m,o,l,u,x[h+6],V,2821735955),u=d(u,m,o,l,x[h+7],U,4249261313),l=d(l,u,m,o,x[h+8],C,1770035416),o=d(o,l,u,m,x[h+9],T,2336552879),m=d(m,o,l,u,x[h+10],V,4294925233),u=d(u,m,o,l,x[h+11],U,2304563134),l=d(l,u,m,o,x[h+12],C,1804603682),o=d(o,l,u,m,x[h+13],T,4254626195),m=d(m,o,l,u,x[h+14],V,2792965006),u=d(u,m,o,l,x[h+15],U,1236535329),l=g(l,u,m,o,x[h+1],J,4129170786),o=g(o,l,u,m,x[h+6],X,3225465664),m=g(m,o,l,u,x[h+11],Z,643717713),u=g(u,m,o,l,x[h+0],K,3921069994),l=g(l,u,m,o,x[h+5],J,3593408605),o=g(o,l,u,m,x[h+10],X,38016083),m=g(m,o,l,u,x[h+15],Z,3634488961),u=g(u,m,o,l,x[h+4],K,3889429448),l=g(l,u,m,o,x[h+9],J,568446438),o=g(o,l,u,m,x[h+14],X,3275163606),m=g(m,o,l,u,x[h+3],Z,4107603335),u=g(u,m,o,l,x[h+8],K,1163531501),l=g(l,u,m,o,x[h+13],J,2850285829),o=g(o,l,u,m,x[h+2],X,4243563512),m=g(m,o,l,u,x[h+7],Z,1735328473),u=g(u,m,o,l,x[h+12],K,2368359562),l=f(l,u,m,o,x[h+5],k,4294588738),o=f(o,l,u,m,x[h+8],W,2272392833),m=f(m,o,l,u,x[h+11],z,1839030562),u=f(u,m,o,l,x[h+14],oe,4259657740),l=f(l,u,m,o,x[h+1],k,2763975236),o=f(o,l,u,m,x[h+4],W,1272893353),m=f(m,o,l,u,x[h+7],z,4139469664),u=f(u,m,o,l,x[h+10],oe,3200236656),l=f(l,u,m,o,x[h+13],k,681279174),o=f(o,l,u,m,x[h+0],W,3936430074),m=f(m,o,l,u,x[h+3],z,3572445317),u=f(u,m,o,l,x[h+6],oe,76029189),l=f(l,u,m,o,x[h+9],k,3654602809),o=f(o,l,u,m,x[h+12],W,3873151461),m=f(m,o,l,u,x[h+15],z,530742520),u=f(u,m,o,l,x[h+2],oe,3299628645),l=y(l,u,m,o,x[h+0],ue,4096336452),o=y(o,l,u,m,x[h+7],xe,1126891415),m=y(m,o,l,u,x[h+14],he,2878612391),u=y(u,m,o,l,x[h+5],me,4237533241),l=y(l,u,m,o,x[h+12],ue,1700485571),o=y(o,l,u,m,x[h+3],xe,2399980690),m=y(m,o,l,u,x[h+10],he,4293915773),u=y(u,m,o,l,x[h+1],me,2240044497),l=y(l,u,m,o,x[h+8],ue,1873313359),o=y(o,l,u,m,x[h+15],xe,4264355552),m=y(m,o,l,u,x[h+6],he,2734768916),u=y(u,m,o,l,x[h+13],me,1309151649),l=y(l,u,m,o,x[h+4],ue,4149444226),o=y(o,l,u,m,x[h+11],xe,3174756917),m=y(m,o,l,u,x[h+2],he,718787259),u=y(u,m,o,l,x[h+9],me,3951481745),l=a(l,w),u=a(u,v),m=a(m,q),o=a(o,F)}return p(l)+p(u)+p(m)+p(o)}function La(t,r=80){return`https://www.gravatar.com/avatar/${Aa(t.toLowerCase().trim())}?d=identicon&s=${r}`}function $a({user:t}){const r=t.email?La(t.email):null;return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Authenticated User"})}),e.jsx("div",{className:"p-4",children:e.jsxs("dl",{className:"divide-y-0",children:[e.jsx(M,{label:"ID",value:e.jsx("code",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:String(t.id)})}),t.name&&e.jsx(M,{label:"Name",value:e.jsxs("span",{className:"flex items-center gap-2",children:[r&&e.jsx("img",{src:r,alt:t.name,className:"w-6 h-6 rounded-full"}),e.jsx("span",{children:t.name})]})}),t.email&&e.jsx(M,{label:"Email Address",value:e.jsx("a",{href:`mailto:${t.email}`,className:"text-indigo-600 dark:text-indigo-400 hover:underline",children:t.email})})]})})]})}function re(t){return t<1?"<1 ms":t<1e3?`${t.toFixed(2)} ms`:`${(t/1e3).toFixed(2)} s`}function pe(t,r){return t.length<=r?t:t.substring(0,r)+"..."}function Wa(t){switch(t){case"error":return"error";case"warn":return"warning";case"log":case"info":return"info";default:return"default"}}function Fa(t){switch(t){case"completed":return"success";case"failed":return"error";case"active":return"info";case"waiting":case"delayed":return"warning";default:return"default"}}function Ya({entries:t}){const r=b.useMemo(()=>{const i=t.filter(x=>Ee(x)),d=t.filter(x=>Pe(x)),g=t.filter(x=>De(x)),f=t.filter(x=>ka(x)),y=t.filter(x=>va(x)),j=t.filter(x=>wa(x)),p=t.filter(x=>Na(x));return{exceptions:i,logs:d,queries:g,events:f,jobs:y,cache:j,mails:p}},[t]),a=b.useMemo(()=>[{id:"exceptions",label:"Exceptions",entries:r.exceptions,color:"bg-red-500"},{id:"logs",label:"Logs",entries:r.logs,color:"bg-blue-500"},{id:"queries",label:"Queries",entries:r.queries,color:"bg-purple-500"},{id:"events",label:"Events",entries:r.events,color:"bg-green-500"},{id:"jobs",label:"Jobs",entries:r.jobs,color:"bg-yellow-500"},{id:"cache",label:"Cache",entries:r.cache,color:"bg-cyan-500"},{id:"mails",label:"Mails",entries:r.mails,color:"bg-pink-500"}].filter(d=>d.entries.length>0),[r]),[s,n]=b.useState(()=>r.exceptions.length>0?"exceptions":r.logs.length>0?"logs":r.queries.length>0?"queries":r.events.length>0?"events":r.jobs.length>0?"jobs":r.cache.length>0?"cache":r.mails.length>0?"mails":"queries");if(a.length===0)return null;const c=b.useMemo(()=>{if(r.queries.length===0)return null;const i=r.queries.reduce((f,y)=>f+y.payload.duration,0),d=new Set(r.queries.map(f=>f.payload.query)).size,g=r.queries.length-d;return{total:i,duplicates:g}},[r.queries]);return e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"flex flex-wrap gap-1 p-2 bg-gray-50 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:a.map(i=>e.jsxs("button",{onClick:()=>n(i.id),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${s===i.id?"bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[i.label,e.jsx("span",{className:`inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-medium rounded ${s===i.id?"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300":"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-400"}`,children:i.entries.length})]},i.id))}),e.jsxs("div",{children:[s==="queries"&&r.queries.length>0&&e.jsxs("div",{children:[c&&e.jsxs("div",{className:"px-4 py-2 bg-gray-100 dark:bg-gray-800/50 text-sm text-gray-600 dark:text-gray-400 flex justify-between",children:[e.jsxs("span",{children:[r.queries.length," queries, ",c.duplicates," of which are duplicated"]}),e.jsxs("span",{children:["Total: ",e.jsx("strong",{children:re(c.total)})]})]}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.queries.map(i=>e.jsxs(P,{to:`/entry/${i.id}`,className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsx("code",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 truncate flex-1 mr-4",children:pe(i.payload.query,70)}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[i.payload.slow&&e.jsx(O,{variant:"warning",children:"slow"}),e.jsx("span",{className:`text-sm font-mono ${i.payload.slow?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"}`,children:re(i.payload.duration)}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]},i.id))})]}),s==="exceptions"&&r.exceptions.length>0&&e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.exceptions.map(i=>e.jsx(P,{to:`/entry/${i.id}`,className:"block px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{variant:"error",children:i.payload.name}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:pe(i.payload.message,60)})]}),i.payload.context&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:["at ",i.payload.context]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(i.createdAt),{addSuffix:!0})}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]})},i.id))}),s==="logs"&&r.logs.length>0&&e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.logs.map(i=>e.jsxs(P,{to:`/entry/${i.id}`,className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 mr-4",children:[e.jsx(O,{variant:Wa(i.payload.level),children:i.payload.level.toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:pe(i.payload.message,60)}),i.payload.context&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["[",i.payload.context,"]"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(i.createdAt),{addSuffix:!0})}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]},i.id))}),s==="events"&&r.events.length>0&&e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.events.map(i=>e.jsxs(P,{to:`/entry/${i.id}`,className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 mr-4",children:[e.jsx(O,{variant:"success",children:i.payload.name}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:[i.payload.listeners.length," listener(s)"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:re(i.payload.duration)}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]},i.id))}),s==="jobs"&&r.jobs.length>0&&e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.jobs.map(i=>e.jsxs(P,{to:`/entry/${i.id}`,className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 mr-4",children:[e.jsx(O,{variant:Fa(i.payload.status),children:i.payload.status}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:i.payload.name}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["on ",i.payload.queue]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[i.payload.duration!==void 0&&e.jsx("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:re(i.payload.duration)}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]},i.id))}),s==="cache"&&r.cache.length>0&&e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.cache.map(i=>e.jsxs(P,{to:`/entry/${i.id}`,className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 mr-4",children:[e.jsx(O,{variant:i.payload.hit?"success":"default",children:i.payload.operation.toUpperCase()}),e.jsx("code",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 truncate",children:pe(i.payload.key,50)}),i.payload.hit!==void 0&&e.jsx("span",{className:`text-xs ${i.payload.hit?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-500"}`,children:i.payload.hit?"HIT":"MISS"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:re(i.payload.duration)}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]},i.id))}),s==="mails"&&r.mails.length>0&&e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.mails.map(i=>e.jsxs(P,{to:`/entry/${i.id}`,className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 mr-4",children:[e.jsx(O,{variant:i.payload.status==="sent"?"success":"error",children:i.payload.status}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:i.payload.subject}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:["to ",Array.isArray(i.payload.to)?i.payload.to.join(", "):i.payload.to]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[e.jsx("span",{className:"text-sm font-mono text-gray-500 dark:text-gray-400",children:re(i.payload.duration)}),e.jsx(L,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300"})]})]},i.id))})]})]})}function _a(t){if(t===0)return"0 B";const r=1024,a=["B","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(r));return`${parseFloat((t/Math.pow(r,s)).toFixed(1))} ${a[s]}`}function Ha(t){return t<1e3?`${t} ms`:`${(t/1e3).toFixed(2)} s`}function Ba(t,r){if(r.host)return r.host;try{return new URL(t).host}catch{return"-"}}function Ia({entry:t,related:r=[]}){const{payload:a,createdAt:s}=t,n=Ba(a.url,a.headers),c={};a.body&&(c.body=a.body),a.query&&Object.keys(a.query).length>0&&(c.query=a.query),a.params&&Object.keys(a.params).length>0&&(c.params=a.params);const i=[{id:"payload",label:"Payload",content:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:Object.keys(c).length>0?JSON.stringify(c,null,2):"{}"})},{id:"headers",label:"Headers",content:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:JSON.stringify(a.headers,null,2)})}],d=[{id:"response",label:"Response",content:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:a.responseBody?typeof a.responseBody=="string"?a.responseBody:JSON.stringify(a.responseBody,null,2):"{}"})},{id:"response-headers",label:"Headers",content:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:a.responseHeaders?JSON.stringify(a.responseHeaders,null,2):"{}"})},{id:"session",label:"Session",content:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:a.session&&Object.keys(a.session).length>0?JSON.stringify(a.session,null,2):"{}"})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Request Details"})}),e.jsx("div",{className:"p-4",children:e.jsxs("dl",{className:"divide-y-0",children:[e.jsx(M,{label:"Time",value:e.jsxs("span",{children:[ae(D(s),"MMMM do yyyy, h:mm:ss a")," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",R(D(s),{addSuffix:!0}),")"]})]})}),e.jsx(M,{label:"Hostname",value:n}),e.jsx(M,{label:"Method",value:e.jsx(O,{variant:yt(a.method),children:a.method})}),a.controllerAction&&e.jsx(M,{label:"Controller Action",value:e.jsx("code",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:a.controllerAction})}),e.jsx(M,{label:"Path",value:e.jsx("code",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:a.path})}),e.jsx(M,{label:"Status",value:a.statusCode?e.jsx(O,{variant:Ra(a.statusCode),children:a.statusCode}):"-"}),e.jsx(M,{label:"Duration",value:a.duration!==void 0?e.jsx("span",{className:a.duration>1e3?"text-yellow-600 dark:text-yellow-400 font-medium":"",children:Ha(a.duration)}):"-"}),e.jsx(M,{label:"IP Address",value:a.ip||"-"}),e.jsx(M,{label:"Memory Usage",value:a.memory!==void 0?_a(a.memory):"-"}),a.tags&&a.tags.length>0&&e.jsx(M,{label:"Tags",value:e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map((g,f)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",children:g},f))})})]})})]}),a.user&&e.jsx($a,{user:a.user}),e.jsx(et,{tabs:i,defaultTab:"payload"}),e.jsx(et,{tabs:d,defaultTab:"response"}),e.jsx(Ya,{entries:r})]})}function Oe({title:t,content:r,defaultExpanded:a=!1}){const[s,n]=b.useState(a),[c,i]=b.useState(!1),d=typeof r=="string"?r:JSON.stringify(r,null,2),g=r==null||typeof r=="object"&&r!==null&&Object.keys(r).length===0,f=async()=>{await navigator.clipboard.writeText(d),i(!0),setTimeout(()=>i(!1),2e3)};return g?null:e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>n(!s),className:"w-full flex items-center justify-between px-4 py-3 bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[s?e.jsx(at,{className:"h-4 w-4 text-gray-500"}):e.jsx(L,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:t})]}),s&&e.jsx("button",{onClick:y=>{y.stopPropagation(),f()},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded",title:"Copy to clipboard",children:c?e.jsx($t,{className:"h-4 w-4 text-green-500"}):e.jsx(Wt,{className:"h-4 w-4 text-gray-500"})})]}),s&&e.jsx("div",{className:"p-4 bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:d})})]})}function Qa(t){return t<1e3?`${t} ms`:`${(t/1e3).toFixed(2)} s`}function Xa({entry:t}){const{payload:r,createdAt:a}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Query Details"})}),e.jsx("div",{className:"p-4",children:e.jsxs("dl",{className:"divide-y-0",children:[e.jsx(M,{label:"Time",value:e.jsxs("span",{children:[ae(D(a),"MMMM do yyyy, h:mm:ss a")," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",R(D(a),{addSuffix:!0}),")"]})]})}),e.jsx(M,{label:"Source",value:e.jsx(O,{variant:"info",children:r.source||"unknown"})}),e.jsx(M,{label:"Connection",value:r.connection||"default"}),e.jsx(M,{label:"Duration",value:e.jsxs("span",{className:r.slow?"text-red-600 dark:text-red-400 font-medium":"",children:[Qa(r.duration),r.slow&&e.jsx(O,{variant:"error",className:"ml-2",children:"SLOW"})]})}),e.jsx(M,{label:"Status",value:r.slow?e.jsx(O,{variant:"warning",children:"Slow Query"}):e.jsx(O,{variant:"success",children:"Normal"})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Query"})}),e.jsx("div",{className:"p-4 bg-gray-900 dark:bg-gray-950",children:e.jsx("pre",{className:"text-sm text-gray-100 font-mono whitespace-pre-wrap break-all",children:r.query})})]}),r.parameters&&r.parameters.length>0&&e.jsx(Oe,{title:"Query Parameters",content:r.parameters,defaultExpanded:!0})]})}function za({entry:t}){var s;const{payload:r,createdAt:a}=t;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Exception Details"})}),e.jsx("div",{className:"p-4",children:e.jsxs("dl",{className:"divide-y-0",children:[e.jsx(M,{label:"Time",value:e.jsxs("span",{children:[ae(D(a),"MMMM do yyyy, h:mm:ss a")," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",R(D(a),{addSuffix:!0}),")"]})]})}),e.jsx(M,{label:"Exception",value:e.jsx(O,{variant:"error",children:r.name})}),e.jsx(M,{label:"Message",value:e.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:r.message})}),r.code!==void 0&&e.jsx(M,{label:"Error Code",value:e.jsx("code",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:r.code})}),r.context&&e.jsx(M,{label:"Context",value:r.context})]})})]}),r.request&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Request Context"})}),e.jsx("div",{className:"p-4",children:e.jsxs("dl",{className:"divide-y-0",children:[e.jsx(M,{label:"Method",value:e.jsx(O,{variant:yt(r.request.method),children:r.request.method})}),e.jsx(M,{label:"URL",value:e.jsx("code",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:r.request.url})})]})})]}),((s=r.request)==null?void 0:s.body)&&e.jsx(Oe,{title:"Request Body",content:r.request.body,defaultExpanded:!0}),r.stack&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Stack Trace"})}),e.jsx("div",{className:"p-4 bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-red-400 font-mono whitespace-pre-wrap",children:r.stack})})]})]})}const tt={verbose:{variant:"default",label:"VERBOSE"},debug:{variant:"info",label:"DEBUG"},log:{variant:"success",label:"LOG"},warn:{variant:"warning",label:"WARNING"},error:{variant:"error",label:"ERROR"}};function Ga({entry:t}){const{payload:r,createdAt:a}=t,s=tt[r.level]||tt.log;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Log Details"})}),e.jsx("div",{className:"p-4",children:e.jsxs("dl",{className:"divide-y-0",children:[e.jsx(M,{label:"Time",value:e.jsxs("span",{children:[ae(D(a),"MMMM do yyyy, h:mm:ss a")," ",e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(",R(D(a),{addSuffix:!0}),")"]})]})}),e.jsx(M,{label:"Level",value:e.jsx(O,{variant:s.variant,children:s.label})}),r.context&&e.jsx(M,{label:"Context",value:e.jsx("code",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:r.context})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Message"})}),e.jsx("div",{className:"p-4",children:e.jsx("p",{className:`text-sm ${r.level==="error"?"text-red-600 dark:text-red-400":r.level==="warn"?"text-yellow-600 dark:text-yellow-400":"text-gray-900 dark:text-white"}`,children:r.message})})]}),r.metadata&&Object.keys(r.metadata).length>0&&e.jsx(Oe,{title:"Metadata",content:r.metadata,defaultExpanded:!0}),r.stack&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Stack Trace"})}),e.jsx("div",{className:"p-4 bg-gray-900 dark:bg-gray-950 overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-red-400 font-mono whitespace-pre-wrap",children:r.stack})})]})]})}function Va(){const{id:t}=kt(),[r,a]=b.useState(null),[s,n]=b.useState([]),[c,i]=b.useState(!0);if(b.useEffect(()=>{(async()=>{if(t)try{const j=await Qt(parseInt(t));a(j.data),n(j.related||[])}catch(j){console.error("Failed to fetch entry:",j)}finally{i(!1)}})()},[t]),c)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})});if(!r)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Entry not found"}),e.jsx(P,{to:"/",className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",children:"Go back to dashboard"})]});const d={request:"Request",query:"Query",exception:"Exception",log:"Log",cache:"Cache",event:"Event",job:"Job",schedule:"Schedule",mail:"Mail"},g={request:"badge-info",query:"badge-gray",exception:"badge-error",log:"badge-success",cache:"badge-warning",event:"badge-info",job:"badge-warning",schedule:"badge-gray",mail:"badge-info"},f=()=>Le(r)?e.jsx(Ia,{entry:r,related:s}):De(r)?e.jsx(Xa,{entry:r}):Ee(r)?e.jsx(za,{entry:r}):Pe(r)?e.jsx(Ga,{entry:r}):e.jsx(Oe,{title:"Payload",content:r.payload,defaultExpanded:!0});return e.jsxs("div",{children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 lg:left-64 z-30 h-16 bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-4 px-4 lg:px-6 h-full",children:[e.jsx(P,{to:-1,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(At,{className:"h-5 w-5 text-gray-500"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`badge ${g[r.type]}`,children:r.type==="request"?"REQ ID":d[r.type]}),e.jsx("h1",{className:"text-lg font-mono text-gray-900 dark:text-white truncate",children:r.requestId||`#${r.id}`})]})})]})}),e.jsxs("div",{className:"pt-16 space-y-6",children:[f(),s.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Related Entries (",s.length,")"]})}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(y=>e.jsx(P,{to:`/entries/${y.id}`,className:"p-4 block hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`badge ${g[y.type]}`,children:y.type}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:Ua(y)})]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:R(D(y.createdAt),{addSuffix:!0})})]})},y.id))})]})]})]})}function Ua(t){if(De(t)){const r=t.payload.query;return r.length>50?r.substring(0,50)+"...":r}if(Ee(t))return`${t.payload.name}: ${t.payload.message}`;if(Pe(t)){const r=t.payload.message;return r.length>50?r.substring(0,50)+"...":r}return Le(t)?`${t.payload.method} ${t.payload.path}`:`Entry #${t.id}`}function Ja(){return e.jsx(vt,{children:e.jsxs(B,{path:"/",element:e.jsx(er,{}),children:[e.jsx(B,{index:!0,element:e.jsx(fa,{})}),e.jsx(B,{path:"requests",element:e.jsx(Ca,{})}),e.jsx(B,{path:"queries",element:e.jsx(Da,{})}),e.jsx(B,{path:"exceptions",element:e.jsx(Ea,{})}),e.jsx(B,{path:"logs",element:e.jsx(qa,{})}),e.jsx(B,{path:"entries/:id",element:e.jsx(Va,{})}),e.jsx(B,{path:"*",element:e.jsx(Nt,{to:"/",replace:!0})})]})})}const Za=()=>{const t=window.location.pathname,r=t.indexOf("/nestlens");return r!==-1?t.substring(0,r+9):"/nestlens"};Ot.createRoot(document.getElementById("root")).render(e.jsx(Mt.StrictMode,{children:e.jsx(St,{basename:Za(),children:e.jsx(Ja,{})})}));
